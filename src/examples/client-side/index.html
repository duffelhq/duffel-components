<!DOCTYPE html>
<html>
  <head>
    <title>Checkout page example</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="https://duffel.com/images/favicon/favicon-96x96.png"
    />

    <!-- 1. This script loads duffel-components -->
    <script src="http://localhost:8000/ancillaries/index.js"></script>
  </head>

  <body style="font-family: sans-serif">
    <h1>Checkout page</h1>

    <!-- 2. Add the custom element to your markup where you want to render the ancillaries card -->
    <duffel-ancillaries></duffel-ancillaries>
  </body>
  <script>
    const duffelAncillariesElement =
      document.querySelector("duffel-ancillaries");

    // 3. Render the component with the required data, you can safely call this function as many times as you want. E.g. when your passenger data changes.
    duffelAncillariesElement.render({
      offer_id: "fixture_off_1",
      services: ["bags", "seats", "cancel_for_any_reason"],
      passengers: [
        {
          given_name: "Mae",
          family_name: "Jemison",
          gender: "F",
          title: "dr",
          born_on: "1956-10-17",
          email: "m.jemison@nasa.gov",
          phone_number: "+16177562626",
        },
        {
          given_name: "Dorothy",
          family_name: "Green",
          gender: "F",
          title: "dr",
          born_on: "1942-10-17",
        },
      ],
      debug: true,
    });

    // 4. Listen to 'onPayloadReady' event on the component. `event.detail.data` contains the payload you need to send to Duffel's API to create an order.
    duffelAncillariesElement.addEventListener("onPayloadReady", (event) =>
      console.log("onPayloadReady\n", event.detail)
    );
  </script>
</html>
